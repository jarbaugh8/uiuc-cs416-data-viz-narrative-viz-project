(this["webpackJsonpnarrative-visualization-project"]=this["webpackJsonpnarrative-visualization-project"]||[]).push([[0],{18:function(t,e,a){},21:function(t,e,a){},22:function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),r=a(12),i=a.n(r),s=(a(18),a(0)),c=a(4),l=a(9),u=a(7),d=a(1),v=Array.from(new Array(58),(function(t,e){return e+1960}));var h=function(t){var e=t.year,a=t.setYear,n=t.percentMode,o=t.setPercentMode,r=t.sceneNumber,i=t.setSceneNumber,s=r<3;function c(t){var e="Percent"==t.target.value;o(e),2===r&&e&&i(3),3===r&&i(4)}var l=r<2||void 0;return Object(d.jsxs)("span",{children:[Object(d.jsx)("select",{disabled:s,onChange:function(t){a(t.target.value),3===r&&i(4)},value:e,style:{fontSize:32},children:v.map((function(t,e){return Object(d.jsx)("option",{value:t,children:t},"year".concat(e))}))}),Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{id:"form-0",type:"radio",name:"mode_selector",value:"Absolute",onChange:c,checked:n?void 0:"checked",style:{fontSize:32}}),Object(d.jsxs)("label",{htmlFor:"form-0",children:["Per Capita Values",Object(d.jsx)("br",{})]}),Object(d.jsx)("input",{id:"form-1",disabled:l,type:"radio",name:"mode_selector",value:"Percent",onChange:c,style:{color:l?"gray":"white"},checked:n?"checked":void 0}),Object(d.jsxs)("label",{htmlFor:"form-1",children:[" Percent Change Over 10 Years",Object(d.jsx)("br",{})]})]})]})},p=a(13),b=Object(l.a)(Object(l.a)({},u),p);var f=function(t){var e,a=t.data,r=t.state,i=Object(n.useState)(!1),v=Object(s.a)(i,2),p=v[0],f=v[1],j=Object(n.useState)({}),g=Object(s.a)(j,2),y=g[0],m=g[1],O=Object(n.useState)({}),x=Object(s.a)(O,2),w=x[0],P=x[1],S=Object(n.useState)(0),C=Object(s.a)(S,2),k=C[0],N=C[1],A=["red","blue","green","yellow","orange","purple"];console.log("usePercentageDiff: ".concat(p)),console.log("locationColors: ".concat(JSON.stringify(w)));var _=r.year,D=r.setYear,M=r.manualInputYear,I=r.setManualInputYear;!M&&k>1&&(M=2017),console.log("year=".concat(_));var T=-10;_=null!==(e=M)&&void 0!==e?e:_;var E=Object(n.useState)(void 0),L=Object(s.a)(E,2),z=L[0],F=L[1],Y=1500,G=1500,R=500,U=30,B=80,J=100,Q=1e3,q=function(t,e){var n,o;return 1==(null===a||void 0===a||null===(n=a[t])||void 0===n||null===(o=n[null!==e&&void 0!==e?e:_])||void 0===o?void 0:o.isInvalidData)},X=q;p&&(X=function(t){return q(t,_-T)||q(t,_)});var H=function(t,e,n){var o,r,i,s,c;return e=parseInt(null!==(o=e)&&void 0!==o?o:_),X(t,e+=null!==n&&void 0!==n?n:0)&&(e=e++),null!==(r=null===a||void 0===a||null===(i=a[t])||void 0===i||null===(s=i[null!==(c=e)&&void 0!==c?c:_])||void 0===s?void 0:s.ghg)&&void 0!==r?r:void 0},V=function(t,e,n){var o,r,i,s,c;return e=parseInt(null!==(o=e)&&void 0!==o?o:_),X(t,e+=null!==n&&void 0!==n?n:0)&&(e=e++),null!==(r=null===a||void 0===a||null===(i=a[t])||void 0===i||null===(s=i[null!==(c=e)&&void 0!==c?c:_])||void 0===s?void 0:s.gdp_per_cap)&&void 0!==r?r:void 0},W=H,$=V;function K(t){return t==1/0?void 0:t}p&&(W=function(t,e){return 100*K(H(t,e)/H(t,e,T)-1)},$=function(t,e){return 100*K(V(t,e)/V(t,e,T)-1)}),!M&&_>2017&&(console.log("paosidjfpaosidjfaosdpfijasdpfoaij"),console.log(M),I(2017),N(2));var Z=Object(n.useState)(Object.keys(a).filter((function(t){return null!=W(t,2017)&&null!=$(t,2017)&&W(t,2017)>0&&$(t,2017)>0}))),tt=Object(s.a)(Z,2),et=tt[0];tt[1],Object(n.useEffect)((function(){if(console.log(k,_),1===k&&_<2017){if(void 0==z){var t=setInterval((function(){D((function(t){return t+10}))}),1e3);F(t)}}else z&&(clearInterval(z),F(void 0))}),[k,_]);var at=function(t,e){var a=o.a.useRef();return o.a.useEffect((function(){return t(u.select(a.current)),function(){}}),e),a}((function(t){var e=Math.min.apply(Math,Object(c.a)(et.map((function(t){return W(t)})).filter((function(t){return t})))),a=Math.max.apply(Math,Object(c.a)(et.map((function(t){return W(t)})).filter((function(t){return t}))));p&&(a+=.025*(a-(e-=.025*(a-e))));var n=Math.min.apply(Math,Object(c.a)(et.map((function(t){return $(t)})).filter((function(t){return t})))),o=Math.max.apply(Math,Object(c.a)(et.map((function(t){return $(t)})).filter((function(t){return t}))));p&&(o+=.025*(o-(n-=.025*(o-n))));var r=p?b.scaleLinear:b.scaleLog,i=r().domain([e,a]).rangeRound([Y-B,R]),s=function(t,e){return isNaN(t)||!t?e:t},u=r().domain([n,o]).rangeRound([J,G-U]);t.select(".x-axis").call((function(t){return t.attr("transform","translate(0,".concat(Y-B,")")).style("color","steelblue").transition().duration(Q).ease(b.easePoly).call(b.axisBottom(u).ticks(null,"s"))})),t.select(".y-axis").call((function(t){return t.attr("transform","translate(".concat(J,",0)")).style("color","steelblue").transition().duration(Q).ease(b.easePoly).call(b.axisLeft(i).ticks(null,"s"))}));var d=b.select("#mychart-tooltip").style("position","absolute").style("opacity",0).attr("class","tooltip").style("background-color","black").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px").attr("position","absolute").attr("pointer-events","none");console.log("ASDF"),console.log(y);var v=function(t,e){return isFinite(t)?t.toFixed(e):"N/A"};b.select("svg").selectAll(".annotation").remove(),0===k?function(){var t=u($("United States")),e=i(W("United States")),a=b.annotation().notePadding(15).annotations([{label:"TEST TEXT",bgPadding:20,x:200,y:R+100,note:{label:"In 1960, the correlation between GDP per capita and greenhouse gas emissions was pretty clear. Click on a point to follow that country / location through the years.",wrap:1e3,type:b.annotationLabel}},{note:{label:"The USA was near the top (in this dataset) for both measures in 1960.",wrap:250},type:b.annotationCalloutCircle,subject:{radius:15,radiusPadding:10},className:"show-bg",x:t,y:e,dy:225,dx:-75}]);b.select("svg").append("g").attr("class",".annotation").attr("font-size","25").attr("class","annotation-group").attr("pointer-events","none").call(a)}():2===k?function(){var t=u($("Qatar")),e=i(W("Qatar")),a=b.annotation().notePadding(15).annotations([{label:"TEST TEXT",bgPadding:20,x:200,y:R-50,note:{label:"This correlation stands the test of 50+ years - in 2017, the correlation seems even more pronounced, though this may in part due to having a broader dataset. Click more locations if you'd like to track them, and select 'Percent Change Over 10 Years' at the bottom to continue.",wrap:750,type:b.annotationLabel}},{note:{label:"As soon as Qatar entered the dataset, it topped the charts in greenhouse gas emissions, presumably due to the nature of its energy-industry exports.",wrap:250},type:b.annotationCalloutCircle,subject:{radius:15,radiusPadding:10},className:"show-bg",x:t,y:e,dy:350,dx:0}]);b.select("svg").append("g").attr("class",".annotation").attr("font-size","25").attr("class","annotation-group").attr("pointer-events","none").call(a)}():3===k&&function(){var t=u($("Lao PDR")),e=i(W("Lao PDR")),a=b.annotation().notePadding(15).annotations([{bgPadding:20,x:200,y:R+50,note:{label:"When viewing the change over the last 10 years of an individual country, the correlation between GDP and greenhouse gas emissions is less obvious, but still noticeable. Go ahead and explore; the year selector is now unlocked.",wrap:750,type:b.annotationLabel}},{note:{label:"The GDP of Laos has been growing very rapidly (relatively speaking) over the last 10 years, and that has come with a huge relative spike in greenhouse gas emissions - much more so than other countries with similar growth.",wrap:400},type:b.annotationCalloutCircle,subject:{radius:15,radiusPadding:10},className:"show-bg",x:t,y:e,dy:200,dx:-50}]);b.select("svg").append("g").attr("class",".annotation").attr("font-size","25").attr("class","annotation-group").attr("pointer-events","none").call(a)}();var h=t.select(".plot-area").attr("fill","steelblue").selectAll(".scatterpoint").data(et).join("circle");h.transition().duration(Q).ease(b.easePoly).attr("class","scatterpoint").attr("cx",(function(t){return X(t)?0:(e=$(t),s(u(e),n));var e})).attr("cy",(function(t){return X(t)?0:(a=W(t),s(i(a),e));var a})).attr("r",(function(t){return X(t)?0:y[t]?12:6})).attr("fill",(function(t){var e=isFinite(W(t))&&isFinite($(t))?"white":"gray";return y[t]&&(e=w[t]),e})),h.on("mouseover",(function(t){d.style("opacity",1),b.select(this).style("stroke","black").style("opacity",1).style("width","auto").style("height","auto")})).on("click",(function(t,e){var a=Object(l.a)({},y);if(a[e]=!y[e],m(a),void 0==w[e]){var n=Object(l.a)({},w);n[e]=A[Object.keys(w).length%A.length],P(n)}0===k&&N(1)})).on("mousemove",(function(t,e){d.html("Country/Region:\t".concat(e,"<br>GDP per cap:\t$").concat(v(V(e),0)," USD<br>GHG per cap:\t").concat(v(H(e),2)," kt CO2 equiv")).style("left",b.pointer(t)[0]+5+"px").style("top",b.pointer(t)[1]+"px").style("width","auto").style("height","auto")})).on("mouseleave",(function(t){d.style("opacity",0).style("width","0px").style("height","0px").html(""),b.select(this).style("stroke","none").style("opacity",.8)}));var f=p?"% Change ":"",j=p?" (last ".concat(10," years)"):"";t.select(".x-label").attr("text-anchor","end").attr("x",940).attr("y",1490).style("fill","white").attr("font-size",20).text(f+"GDP per capita, inflation-adjusted (dollars)"+j);t.select(".y-label").attr("text-anchor","end").attr("x",20).attr("y",530).style("fill","white").attr("font-size",20).attr("transform","rotate(-90, ".concat(20,", ").concat(530,")")).text(f+"Greenhouse gas emissions per capita, CO2 kt equivalent"+j)}),[_,p,y,w,k]);return Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},id:"mychart-container",children:[Object(d.jsxs)("svg",{ref:at,style:{height:"1500px",width:"1500px",marginRight:"0px",marginLeft:"0px"},display:"block",margin:"auto",children:[Object(d.jsx)("g",{className:"plot-area"}),Object(d.jsx)("g",{className:"x-axis"}),Object(d.jsx)("g",{className:"y-axis"}),Object(d.jsx)("g",{className:"annotation"}),Object(d.jsx)("text",{className:"x-label"}),Object(d.jsx)("text",{className:"y-label"})]}),Object(d.jsx)("div",{id:"mychart-tooltip"})]}),Object(d.jsx)(h,{year:_,setYear:I,percentMode:p,setPercentMode:f,sceneNumber:k,setSceneNumber:N})]})};a(21);var j=function(){var t=Object(n.useState)(null),e=Object(s.a)(t,2),a=e[0],o=e[1],r=Object(n.useState)(0),i=Object(s.a)(r,2),c=i[0],l=i[1],v=Object(n.useState)(!1),h=Object(s.a)(v,2),p=h[0],b=h[1],j=Object(n.useState)([]),g=Object(s.a)(j,2),y=g[0],m=g[1],O=Object(n.useState)([]),x=Object(s.a)(O,2),w=x[0],P=x[1],S=Object(n.useState)({}),C=Object(s.a)(S,2),k=C[0],N=C[1],A=Object(n.useState)(void 0),_=Object(s.a)(A,2),D=_[0],M=_[1];console.log("MANUAL INPUT YEAR: ",D);var I=Object(n.useState)(null!==D&&void 0!==D?D:1960),T=Object(s.a)(I,2),E=T[0],L=T[1],z=0;function F(t,e){z++,Object(n.useEffect)((function(){u.csv(t).then((function(t){e(t),l((function(t){return t+1}))}),(function(t){o(t)}))}),[])}if(F("/uiuc-cs416-data-viz-narrative-viz-project/data/API_NY.GDP.PCAP.CD_DS2_en_csv_v2_2708431.csv",P),F("/uiuc-cs416-data-viz-narrative-viz-project/data/API_EN.ATM.CO2E.PC_DS2_en_csv_v2_2708833.csv",m),Object(n.useEffect)((function(){if(z===c){var t={};e(y,"ghg"),e(w,"gdp_per_cap"),N(t),b(!0)}function e(e,a){e.forEach((function(e){for(var n=[],o=1960;o<=2020;o++)n.push(o);var r=void 0;n.forEach((function(n){var o,i=e["Country Name"],s=parseFloat(e[n]);(i in t||(t[i]={}),n in t[i]||(t[i][n]={}),isNaN(s)||s<=0)&&(s=null!==(o=r)&&void 0!==o?o:0,t[i][n].isInvalidData=!0);r=s,t[i][n][a]=s}))}))}}),[c]),!p)return Object(d.jsx)("div",{children:"Loading..."});if(a)return Object(d.jsx)("div",{children:a.toString()});var Y={manualInputYear:D,setManualInputYear:M,year:E,setYear:L};return Object(d.jsx)("div",{style:{width:"100%",height:"100%"},className:"App",children:Object(d.jsx)("header",{style:{width:"100%",height:"100%"},className:"App-header",children:Object(d.jsx)(f,{data:k,state:Y})})})},g=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),o(t),r(t),i(t)}))};i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(j,{})}),document.getElementById("root")),g()}},[[22,1,2]]]);
//# sourceMappingURL=main.84d3121d.chunk.js.map