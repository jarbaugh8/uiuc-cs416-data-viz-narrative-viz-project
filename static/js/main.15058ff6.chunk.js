(this["webpackJsonpnarrative-visualization-project"]=this["webpackJsonpnarrative-visualization-project"]||[]).push([[0],{18:function(t,e,a){},21:function(t,e,a){},22:function(t,e,a){"use strict";a.r(e);var n=a(2),r=a.n(n),i=a(12),c=a.n(i),o=(a(18),a(0)),l=a(4),s=a(9),u=a(7),d=a(1),v=Array.from(new Array(58),(function(t,e){return e+1960}));var b=function(t){var e=t.year,a=t.setYear,n=t.percentMode,r=t.setPercentMode,i=t.disable;function c(t){var e="Percent"==t.target.value;r(e)}return Object(d.jsxs)("span",{children:[Object(d.jsx)("select",{disabled:i,onChange:function(t){a(t.target.value)},value:e,style:{fontSize:32},children:v.map((function(t,e){return Object(d.jsx)("option",{value:t,children:t},"year".concat(e))}))}),Object(d.jsxs)("form",{disabled:"true",children:[Object(d.jsx)("input",{disabled:n?i:void 0,type:"radio",name:"mode_selector",value:"Absolute",onChange:c,checked:n?void 0:"checked",style:{fontSize:32}}),"Per Capita Values",Object(d.jsx)("br",{}),Object(d.jsx)("input",{disabled:n?void 0:i,type:"radio",name:"mode_selector",value:"Percent",onChange:c,checked:n?"checked":void 0}),"Percent Change Over 10 Years",Object(d.jsx)("br",{})]})]})},f=a(13),j=Object(s.a)(Object(s.a)({},u),f);var p=function(t){var e=t.data,a=t.state,i=Object(n.useState)(!1),c=Object(o.a)(i,2),v=c[0],f=c[1],p=Object(n.useState)({}),h=Object(o.a)(p,2),y=h[0],O=h[1],g=Object(n.useState)({}),x=Object(o.a)(g,2),m=x[0],S=x[1],P=Object(n.useState)(0),k=Object(o.a)(P,2),w=k[0],C=k[1],N=["green","blue","red","yellow","orange","purple"];console.log("usePercentageDiff: ".concat(v)),console.log("locationColors: ".concat(JSON.stringify(m)));var _=a.year,M=a.setYear,A=a.manualInputYear,I=a.setManualInputYear;console.log("year=".concat(_));var D=-10;_=null!==A&&void 0!==A?A:_;var z=Object(n.useState)(void 0),F=Object(o.a)(z,2),Y=F[0],E=F[1],L=800,G=1500,R=150,B=30,J=80,T=100,q=1e3,Q=function(t,a){var n,r;return 1==(null===e||void 0===e||null===(n=e[t])||void 0===n||null===(r=n[null!==a&&void 0!==a?a:_])||void 0===r?void 0:r.isInvalidData)},H=Q;v&&(H=function(t){return Q(t,_-D)||Q(t,_)});var U=function(t,a,n){var r,i,c,o,l;return a=parseInt(null!==(r=a)&&void 0!==r?r:_),H(t,a+=null!==n&&void 0!==n?n:0)&&(a=a++),null!==(i=null===e||void 0===e||null===(c=e[t])||void 0===c||null===(o=c[null!==(l=a)&&void 0!==l?l:_])||void 0===o?void 0:o.ghg)&&void 0!==i?i:void 0},V=function(t,a,n){var r,i,c,o,l;return a=parseInt(null!==(r=a)&&void 0!==r?r:_),H(t,a+=null!==n&&void 0!==n?n:0)&&(a=a++),null!==(i=null===e||void 0===e||null===(c=e[t])||void 0===c||null===(o=c[null!==(l=a)&&void 0!==l?l:_])||void 0===o?void 0:o.gdp_per_cap)&&void 0!==i?i:void 0},$=U,K=V;function W(t){return t==1/0?void 0:t}v&&($=function(t,e){return 100*W(U(t,e)/U(t,e,D)-1)},K=function(t,e){return 100*W(V(t,e)/V(t,e,D)-1)}),!A&&_>2017&&I(2017);var X=Object(n.useState)(Object.keys(e).filter((function(t){return null!=$(t,2017)&&null!=K(t,2017)&&$(t,2017)>0&&K(t,2017)>0}))),Z=Object(o.a)(X,2),tt=Z[0];Z[1],Object(n.useEffect)((function(){if(console.log(w,_),1===w&&_<2017){if(void 0==Y){var t=setInterval((function(){M((function(t){return t+10}))}),1e3);E(t)}}else Y&&(clearInterval(Y),E(void 0))}),[w,_]);var et=function(t,e){var a=r.a.useRef();return r.a.useEffect((function(){return t(u.select(a.current)),function(){}}),e),a}((function(t){var e=Math.min.apply(Math,Object(l.a)(tt.map((function(t){return $(t)})).filter((function(t){return t})))),a=Math.max.apply(Math,Object(l.a)(tt.map((function(t){return $(t)})).filter((function(t){return t}))));v&&(a+=.025*(a-(e-=.025*(a-e))));var n=Math.min.apply(Math,Object(l.a)(tt.map((function(t){return K(t)})).filter((function(t){return t})))),r=Math.max.apply(Math,Object(l.a)(tt.map((function(t){return K(t)})).filter((function(t){return t}))));v&&(r+=.025*(r-(n-=.025*(r-n))));var i=v?j.scaleLinear:j.scaleLog,c=i().domain([e,a]).rangeRound([L-J,R]),o=function(t,e){return isNaN(t)||!t?e:t},u=i().domain([n,r]).rangeRound([T,G-B]);t.select(".x-axis").call((function(t){return t.attr("transform","translate(0,".concat(L-J,")")).style("color","steelblue").transition().duration(q).ease(j.easePoly).call(j.axisBottom(u).ticks(null,"s"))})),t.select(".y-axis").call((function(t){return t.attr("transform","translate(".concat(T,",0)")).style("color","steelblue").transition().duration(q).ease(j.easePoly).call(j.axisLeft(c).ticks(null,"s"))}));var d=j.select("#mychart-tooltip").style("position","absolute").style("opacity",0).attr("class","tooltip").style("background-color","black").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px").attr("position","absolute");console.log("ASDF"),console.log(y);var b=function(t,e){return isFinite(t)?t.toFixed(e):"N/A"},f=t.select(".plot-area").attr("fill","steelblue").selectAll(".scatterpoint").data(tt).join("circle");f.transition().duration(q).ease(j.easePoly).attr("class","scatterpoint").attr("cx",(function(t){return H(t)?0:(e=K(t),o(u(e),n));var e})).attr("cy",(function(t){return H(t)?0:(a=$(t),o(c(a),e));var a})).attr("r",(function(t){return H(t)?0:y[t]?12:6})).attr("fill",(function(t){var e=isFinite($(t))&&isFinite(K(t))?"white":"gray";return y[t]&&(e=m[t]),e})),f.on("mouseover",(function(t){d.style("opacity",1),j.select(this).style("stroke","black").style("opacity",1).style("width","auto").style("height","auto")})).on("click",(function(t,e){var a=Object(s.a)({},y);if(a[e]=!y[e],O(a),void 0==m[e]){var n=Object(s.a)({},m);n[e]=N[Object.keys(m).length%N.length],S(n)}0===w&&C(1)})).on("mousemove",(function(t,e){d.html("Country/Region:\t".concat(e,"<br>GDP per cap:\t$").concat(b(V(e),0)," USD<br>GHG per cap:\t").concat(b(U(e),2)," kt CO2 equiv")).style("left",j.pointer(t)[0]+5+"px").style("top",j.pointer(t)[1]+"px")})).on("mouseleave",(function(t){d.style("opacity",0),j.select(this).style("stroke","none").style("opacity",.8).style("width","0px").style("height","0px")}));var p=v?"% Change ":"",h=v?" (last ".concat(10," years)"):"";t.select(".x-label").attr("text-anchor","end").attr("x",940).attr("y",790).style("fill","white").attr("font-size",20).text(p+"GDP per capita, inflation-adjusted (dollars)"+h);t.select(".y-label").attr("text-anchor","end").attr("x",20).attr("y",180).style("fill","white").attr("font-size",20).attr("transform","rotate(-90, ".concat(20,", ").concat(180,")")).text(p+"Greenhouse gas emissions per capita, CO2 kt equivalent"+h),function(){var t=u(K("Qatar")),e=c($("Qatar")),a=j.annotationLabel,n=[{note:{label:"Longer text to show text wrapping",bgPadding:20,title:"Annotations :)"},subject:{radius:12,radiusPadding:10},className:"show-bg",x:t,y:e,dy:-75,dx:-75}],r=j.annotation().notePadding(15).type(a).annotations(n);j.select("svg").selectAll(".annotation").remove(),j.select("svg").append("g").attr("class",".annotation").attr("class","annotation-group").call(r)}()}),[_,v,y,m,w]);return Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},id:"mychart-container",children:[Object(d.jsxs)("svg",{ref:et,style:{height:"800px",width:"1500px",marginRight:"0px",marginLeft:"0px"},display:"block",margin:"auto",children:[Object(d.jsx)("g",{className:"plot-area"}),Object(d.jsx)("g",{className:"x-axis"}),Object(d.jsx)("g",{className:"y-axis"}),Object(d.jsx)("g",{className:"annotation"}),Object(d.jsx)("text",{className:"x-label"}),Object(d.jsx)("text",{className:"y-label"})]}),Object(d.jsx)("div",{id:"mychart-tooltip"})]}),Object(d.jsx)(b,{year:_,setYear:I,percentMode:v,setPercentMode:f,disable:w<2})]})};a(21);var h=function(){var t=Object(n.useState)(null),e=Object(o.a)(t,2),a=e[0],r=e[1],i=Object(n.useState)(0),c=Object(o.a)(i,2),l=c[0],s=c[1],v=Object(n.useState)(!1),b=Object(o.a)(v,2),f=b[0],j=b[1],h=Object(n.useState)([]),y=Object(o.a)(h,2),O=y[0],g=y[1],x=Object(n.useState)([]),m=Object(o.a)(x,2),S=m[0],P=m[1],k=Object(n.useState)({}),w=Object(o.a)(k,2),C=w[0],N=w[1],_=Object(n.useState)(void 0),M=Object(o.a)(_,2),A=M[0],I=M[1],D=Object(n.useState)(null!==A&&void 0!==A?A:1960),z=Object(o.a)(D,2),F=z[0],Y=z[1],E=0;function L(t,e){E++,Object(n.useEffect)((function(){u.csv(t).then((function(t){e(t),s((function(t){return t+1}))}),(function(t){r(t)}))}),[])}if(L("/uiuc-cs416-data-viz-narrative-viz-project/data/API_NY.GDP.PCAP.CD_DS2_en_csv_v2_2708431.csv",P),L("/uiuc-cs416-data-viz-narrative-viz-project/data/API_EN.ATM.CO2E.PC_DS2_en_csv_v2_2708833.csv",g),Object(n.useEffect)((function(){if(E===l){var t={};e(O,"ghg"),e(S,"gdp_per_cap"),N(t),j(!0)}function e(e,a){e.forEach((function(e){for(var n=[],r=1960;r<=2020;r++)n.push(r);var i=void 0;n.forEach((function(n){var r,c=e["Country Name"],o=parseFloat(e[n]);(c in t||(t[c]={}),n in t[c]||(t[c][n]={}),isNaN(o)||o<=0)&&(o=null!==(r=i)&&void 0!==r?r:0,t[c][n].isInvalidData=!0);i=o,t[c][n][a]=o}))}))}}),[l]),!f)return Object(d.jsx)("div",{children:"Loading..."});if(a)return Object(d.jsx)("div",{children:a.toString()});var G={manualInputYear:A,setManualInputYear:I,year:F,setYear:Y};return Object(d.jsx)("div",{style:{width:"100%",height:"100%"},className:"App",children:Object(d.jsx)("header",{style:{width:"100%",height:"100%"},className:"App-header",children:Object(d.jsx)(p,{data:C,state:G})})})},y=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),i(t),c(t)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root")),y()}},[[22,1,2]]]);
//# sourceMappingURL=main.15058ff6.chunk.js.map