(this["webpackJsonpnarrative-visualization-project"]=this["webpackJsonpnarrative-visualization-project"]||[]).push([[0],{18:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n.n(a),i=n(12),o=n.n(i),c=(n(18),n(0)),l=n(4),s=n(9),u=n(7),d=n(1),v=Array.from(new Array(58),(function(t,e){return e+1960}));var b=function(t){var e=t.year,n=t.setYear,a=t.percentMode,r=t.setPercentMode,i=t.disable;function o(t){var e="Percent"==t.target.value;r(e)}return Object(d.jsxs)("span",{children:[Object(d.jsx)("select",{disabled:i,onChange:function(t){n(t.target.value)},value:e,style:{fontSize:32},children:v.map((function(t,e){return Object(d.jsx)("option",{value:t,children:t},"year".concat(e))}))}),Object(d.jsxs)("form",{disabled:"true",children:[Object(d.jsx)("input",{disabled:a?i:void 0,type:"radio",name:"mode_selector",value:"Absolute",onChange:o,checked:a?void 0:"checked",style:{fontSize:32}}),"Per Capita Values",Object(d.jsx)("br",{}),Object(d.jsx)("input",{disabled:a?void 0:i,type:"radio",name:"mode_selector",value:"Percent",onChange:o,checked:a?"checked":void 0}),"Percent Change Over 10 Years",Object(d.jsx)("br",{})]})]})},f=n(13),j=Object(s.a)(Object(s.a)({},u),f);var p=function(t){var e=t.data,n=t.state,i=Object(a.useState)(!1),o=Object(c.a)(i,2),v=o[0],f=o[1],p=Object(a.useState)({}),h=Object(c.a)(p,2),y=h[0],O=h[1],g=Object(a.useState)({}),x=Object(c.a)(g,2),m=x[0],S=x[1],P=Object(a.useState)(0),k=Object(c.a)(P,2),w=k[0],C=k[1],N=["green","blue","red","yellow","orange","purple"];console.log("usePercentageDiff: ".concat(v)),console.log("locationColors: ".concat(JSON.stringify(m)));var _=n.year,M=n.setYear,A=n.manualInputYear,I=n.setManualInputYear;console.log("year=".concat(_));var D=-10;_=null!==A&&void 0!==A?A:_;var F=Object(a.useState)(void 0),Y=Object(c.a)(F,2),E=Y[0],L=Y[1],z=800,G=1500,R=150,B=30,J=80,T=100,q=1e3,Q=function(t,n){var a,r;return 1==(null===e||void 0===e||null===(a=e[t])||void 0===a||null===(r=a[null!==n&&void 0!==n?n:_])||void 0===r?void 0:r.isInvalidData)},H=Q;v&&(H=function(t){return Q(t,_-D)||Q(t,_)});var U=function(t,n,a){var r,i,o,c,l;return n=parseInt(null!==(r=n)&&void 0!==r?r:_),H(t,n+=null!==a&&void 0!==a?a:0)&&(n=n++),null!==(i=null===e||void 0===e||null===(o=e[t])||void 0===o||null===(c=o[null!==(l=n)&&void 0!==l?l:_])||void 0===c?void 0:c.ghg)&&void 0!==i?i:void 0},V=function(t,n,a){var r,i,o,c,l;return n=parseInt(null!==(r=n)&&void 0!==r?r:_),H(t,n+=null!==a&&void 0!==a?a:0)&&(n=n++),null!==(i=null===e||void 0===e||null===(o=e[t])||void 0===o||null===(c=o[null!==(l=n)&&void 0!==l?l:_])||void 0===c?void 0:c.gdp_per_cap)&&void 0!==i?i:void 0},$=U,K=V;function W(t){return t==1/0?void 0:t}v&&($=function(t,e){return 100*W(U(t,e)/U(t,e,D)-1)},K=function(t,e){return 100*W(V(t,e)/V(t,e,D)-1)}),!A&&_>2017&&I(2017);var X=Object(a.useState)(Object.keys(e).filter((function(t){return null!=$(t,2017)&&null!=K(t,2017)&&$(t,2017)>0&&K(t,2017)>0}))),Z=Object(c.a)(X,2),tt=Z[0];Z[1],Object(a.useEffect)((function(){if(console.log(w,_),1===w&&_<2017){if(void 0==E){var t=setInterval((function(){M((function(t){return t+10}))}),1e3);L(t)}}else E&&(clearInterval(E),L(void 0))}),[w,_]);var et=function(t,e){var n=r.a.useRef();return r.a.useEffect((function(){return t(u.select(n.current)),function(){}}),e),n}((function(t){var e=Math.min.apply(Math,Object(l.a)(tt.map((function(t){return $(t)})).filter((function(t){return t})))),n=Math.max.apply(Math,Object(l.a)(tt.map((function(t){return $(t)})).filter((function(t){return t}))));v&&(n+=.025*(n-(e-=.025*(n-e))));var a=Math.min.apply(Math,Object(l.a)(tt.map((function(t){return K(t)})).filter((function(t){return t})))),r=Math.max.apply(Math,Object(l.a)(tt.map((function(t){return K(t)})).filter((function(t){return t}))));v&&(r+=.025*(r-(a-=.025*(r-a))));var i=v?j.scaleLinear:j.scaleLog,o=i().domain([e,n]).rangeRound([z-J,R]),c=function(t,e){return isNaN(t)||!t?e:t},u=i().domain([a,r]).rangeRound([T,G-B]);t.select(".x-axis").call((function(t){return t.attr("transform","translate(0,".concat(z-J,")")).style("color","steelblue").transition().duration(q).ease(j.easePoly).call(j.axisBottom(u).ticks(null,"s"))})),t.select(".y-axis").call((function(t){return t.attr("transform","translate(".concat(T,",0)")).style("color","steelblue").transition().duration(q).ease(j.easePoly).call(j.axisLeft(o).ticks(null,"s"))}));var d=j.select("#mychart-tooltip").style("position","absolute").style("opacity",0).attr("class","tooltip").style("background-color","black").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px").attr("position","absolute");console.log("ASDF"),console.log(y);var b=function(t,e){return isFinite(t)?t.toFixed(e):"N/A"},f=t.select(".plot-area").attr("fill","steelblue").selectAll(".scatterpoint").data(tt).join("circle");f.transition().duration(q).ease(j.easePoly).attr("class","scatterpoint").attr("cx",(function(t){return H(t)?0:(e=K(t),c(u(e),a));var e})).attr("cy",(function(t){return H(t)?0:(n=$(t),c(o(n),e));var n})).attr("r",(function(t){return H(t)?0:y[t]?12:6})).attr("fill",(function(t){var e=isFinite($(t))&&isFinite(K(t))?"white":"gray";return y[t]&&(e=m[t]),e})),f.on("mouseover",(function(t){d.style("opacity",1),j.select(this).style("stroke","black").style("opacity",1).style("width","auto").style("height","auto")})).on("click",(function(t,e){var n=Object(s.a)({},y);if(n[e]=!y[e],O(n),void 0==m[e]){var a=Object(s.a)({},m);a[e]=N[Object.keys(m).length%N.length],S(a)}0===w&&C(1)})).on("mousemove",(function(t,e){d.html("Country/Region:\t".concat(e,"<br>GDP per cap:\t$").concat(b(V(e),0)," USD<br>GHG per cap:\t").concat(b(U(e),2)," kt CO2 equiv")).style("left",j.pointer(t)[0]+5+"px").style("top",j.pointer(t)[1]+"px")})).on("mouseleave",(function(t){d.style("opacity",0),j.select(this).style("stroke","none").style("opacity",.8).style("width","0px").style("height","0px")}));var p=v?"% Change ":"",h=v?" (last ".concat(10," years)"):"";t.select(".x-label").attr("text-anchor","end").attr("x",940).attr("y",790).style("fill","white").attr("font-size",20).text(p+"GDP per capita, inflation-adjusted (dollars)"+h);t.select(".y-label").attr("text-anchor","end").attr("x",20).attr("y",180).style("fill","white").attr("font-size",20).attr("transform","rotate(-90, ".concat(20,", ").concat(180,")")).text(p+"Greenhouse gas emissions per capita, CO2 kt equivalent"+h),function(){var t=u(K("Qatar")),e=o($("Qatar")),n=j.annotationLabel,a=[{note:{label:"Longer text to show text wrapping",bgPadding:20,title:"Annotations :)"},subject:{radius:12,radiusPadding:10},className:"show-bg",x:t,y:e,dy:-75,dx:-75}],r=j.annotation().notePadding(15).type(n).annotations(a);j.select("svg").selectAll(".annotation").remove(),j.select("svg").append("g").attr("class",".annotation").attr("class","annotation-group").call(r)}()}),[_,v,y,m,w]);return Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(d.jsxs)("div",{style:{width:"100%",height:"100%"},id:"mychart-container",children:[Object(d.jsxs)("svg",{ref:et,style:{height:"800px",width:"1500px",marginRight:"0px",marginLeft:"0px"},display:"block",margin:"auto",children:[Object(d.jsx)("g",{className:"plot-area"}),Object(d.jsx)("g",{className:"x-axis"}),Object(d.jsx)("g",{className:"y-axis"}),Object(d.jsx)("g",{className:"annotation"}),Object(d.jsx)("text",{className:"x-label"}),Object(d.jsx)("text",{className:"y-label"})]}),Object(d.jsx)("div",{id:"mychart-tooltip"})]}),Object(d.jsx)(b,{year:_,setYear:I,percentMode:v,setPercentMode:f,disable:w<2})]})};n(21);var h=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)(0),o=Object(c.a)(i,2),l=o[0],s=o[1],v=Object(a.useState)(!1),b=Object(c.a)(v,2),f=b[0],j=b[1],h=Object(a.useState)([]),y=Object(c.a)(h,2),O=y[0],g=y[1],x=Object(a.useState)([]),m=Object(c.a)(x,2),S=m[0],P=m[1],k=Object(a.useState)({}),w=Object(c.a)(k,2),C=w[0],N=w[1],_=Object(a.useState)(void 0),M=Object(c.a)(_,2),A=M[0],I=M[1],D=Object(a.useState)(null!==A&&void 0!==A?A:1960),F=Object(c.a)(D,2),Y=F[0],E=F[1],L=0;function z(t,e){L++,Object(a.useEffect)((function(){u.csv(t).then((function(t){e(t),s((function(t){return t+1}))}),(function(t){r(t)}))}),[])}if(z("data/API_NY.GDP.PCAP.CD_DS2_en_csv_v2_2708431.csv",P),z("data/API_EN.ATM.CO2E.PC_DS2_en_csv_v2_2708833.csv",g),Object(a.useEffect)((function(){if(L===l){var t={};e(O,"ghg"),e(S,"gdp_per_cap"),N(t),j(!0)}function e(e,n){e.forEach((function(e){for(var a=[],r=1960;r<=2020;r++)a.push(r);var i=void 0;a.forEach((function(a){var r,o=e["Country Name"],c=parseFloat(e[a]);(o in t||(t[o]={}),a in t[o]||(t[o][a]={}),isNaN(c)||c<=0)&&(c=null!==(r=i)&&void 0!==r?r:0,t[o][a].isInvalidData=!0);i=c,t[o][a][n]=c}))}))}}),[l]),!f)return Object(d.jsx)("div",{children:"Loading..."});if(n)return Object(d.jsx)("div",{children:n.toString()});var G={manualInputYear:A,setManualInputYear:I,year:Y,setYear:E};return Object(d.jsx)("div",{style:{width:"100%",height:"100%"},className:"App",children:Object(d.jsx)("header",{style:{width:"100%",height:"100%"},className:"App-header",children:Object(d.jsx)(p,{data:C,state:G})})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),i(t),o(t)}))};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root")),y()}},[[22,1,2]]]);
//# sourceMappingURL=main.904563f7.chunk.js.map